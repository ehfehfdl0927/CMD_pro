<!DOCTYPE html>
<html lang="en">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<script type="text/javascript">

    $(document).ready(function (){

        $("#file").css("display","none");
        $("#defaultImgBtn").css("display","none");
        $("#defaultMessage").css("display","none");

        if($("#user_gender").val() == "W"){
            $("#woman").attr("checked",true);
        }
        else if($("#user_gender").val() == "M"){
            $("#man").attr("checked",true);
        }
        if($("#user_selected_major").val() == "Frontend"){
            $("#Frontend").attr("selected",true);
        }
        else if($("#user_selected_major").val() == "Backend"){
            $("#Backend").attr("selected",true);
        }
        else if($("#user_selected_major").val() == "DBA"){
            $("#DBA").attr("selected",true);
        }
        else if($("#user_selected_major").val() == "AI"){
            $("#AI").attr("selected",true);
        }
        else if($("#user_selected_major").val() == "WhiteHat"){
            $("#WhiteHat").attr("selected",true);
        }

        $("#profile").click(function (){
            $("#file").css("display","block");
            $("#defaultImgBtn").css("display","block");
            $("#profile").css("display","none");
            $("#profile").attr("value", "Y");
            $("#modifyChek").val("Y");
        });

        $("#defaultImgBtn").click(function (){
            $("#defaultImgCheck").val("Y");
            $("#file").val("");
            $("#defaultMessage").css("display","block");
        });
        $("#file").click(function (){
            $("#defaultMessage").css("display","none");
        });

    });

    function submitAction(){
        if($("#user_pwd").val() == ""){
            alert("비밀번호를 입력해주세요.");
            $("#user_pwd").focus();
            return false;
        }
        if($("#user_email").val() == ""){
            alert("이메일을 입력해주세요.");
            $("#user_email").focus();
            return false;
        }
        if($("#user_name").val() == ""){
            alert("이름을 입력해주세요.");
            $("#user_name").focus();
            return false;
        }

        if($("#pwd_check").val() != $("#user_pwd").val()){
            alert("비밀번호가 일치하지 않습니다.");
            return false;
        }

        var fileCheck = $("#file").val();
        var profileModify = $("#profile").val();
        var defaultImgCheck = $("#defaultImgCheck").val();
        if(!fileCheck && profileModify == "Y" && defaultImgCheck == "N"){
            alert("프로필 사진을 첨부해주세요.");
            return false;
        }
        if(fileCheck && defaultImgCheck == "Y"){
            $("#defaultImgCheck").val("N");
        }
    }
</script>
<body>
<form action="/userUpdateAction" method="post" enctype="multipart/form-data" onsubmit="return submitAction();">

    <h4>회원정보 수정 양식</h4>

    <div class="form-group">
        <label for="user_id">*아이디</label>
        <input type="text" id="user_id" name="user_id" th:value="${session.id}" readonly><br>
        <label for="user_pwd">*비밀번호</label>
        <input type="password" id="user_pwd" name="user_pwd" placeholder="비밀번호" th:value="${user.user_pwd}"><br>
        <label for="pwd_check">*비밀번호 확인</label>
        <input type="password" id="pwd_check" name="pwd_check" placeholder="비밀번호 확인"><br>
        <label for="user_name">*이름</label>
        <input type="text" id="user_name" name="user_name" placeholder="이름" th:value="${user.user_name}"><br>
        <label for="user_age">나이</label>
        <input type="number" id="user_age" name="user_age" placeholder="나이" th:value="${user.user_age}"><br>
        <label for="user_major">분야</label>
        <select id="user_major" name="user_major">
            <option value="" selected disabled hidden>분야</option>
            <option id="Frontend" value="Frontend">Frontend</option>
            <option id="Backend" value="Backend">Backend</option>
            <option id="DBA" value="DBA">DBA</option>
            <option id="AI" value="AI">AI</option>
            <option id="WhiteHat" value="WhiteHat">White-Hat</option>
        </select>
        <label for="user_email">*이메일</label>
        <input type="email" id="user_email" name="user_email" placeholder="이메일" th:value="${user.user_email}"><br>
        <input type="checkbox" id="woman" name="user_gender"  value="W">여성
        <input type="checkbox" id="man" name="user_gender"  value="M">남성
        <br><button type="button" id="profile" value="N">프로필 수정</button>
        <div><input id="file" type="file" name="files">
            <button id="defaultImgBtn" type="button">기본 이미지로 변경</button><span id="defaultMessage" style="font-size: 5px; color: #003366d2;">기본이미지 선택완료</span>
        </div>
        <input type="submit" id="submit" name="submit" value="수정" >
        <input type="hidden" id="user_gender" th:value="${user.user_gender}">
        <input type="hidden" id="user_selected_major" th:value="${user.user_major}">
        <input type="hidden" id="modifyChek" name="modify" value="N">
        <input type="hidden" id="defaultImgCheck" name="default_img" value="N">
    </div>

</form>
</body>
</html>